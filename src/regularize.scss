// ==============================
// Global CSS Reset - Regularize.scss - https://github.com/elibessen/regularize.scss
// ==============================

// Remove all default styles except display
// - Resets all properties to their initial values
// - Keeps `display` to prevent layout issues
// - Excludes key elements like <html>, <iframe>, <img>, <svg>, etc.
*:where(:not(html, iframe, canvas, img, svg, video, audio):not(svg *, symbol *)) {
    all: unset;
    display: revert;
}

// Apply box-sizing border-box for all elements
// - Ensures padding and border are included in element dimensions
// - Prevents box-sizing inconsistencies
*, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    font-family: inherit; // Ensure all elements inherit the same font
}

// ======================================
// Text & Font Adjustments
// ======================================

// Prevents mobile browsers from resizing text automatically
html {
    -moz-text-size-adjust: none;
    -webkit-text-size-adjust: none;
    text-size-adjust: none;
    line-height: 1.15; // Default line-height fix
}

// Improve smooth scrolling behavior and font rendering
// - Enables smooth scrolling for better UX
// - Enhances font rendering for macOS users
html, body {
    scroll-behavior: smooth;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    min-height: 100vh; // Ensures full viewport height
    line-height: 1.5; // Improves text readability
}

// Prevents layout-breaking issues due to overflowing content
* {
    min-width: 0;
}

// Reapply pointer cursor for interactive elements
// - Ensures links and buttons show the correct cursor
a, button {
    cursor: pointer;
}

// ======================================
// List Reset
// ======================================

// Remove default list styles
// - No bullets or numbers by default
// - Prevents unexpected extra spacing
ul, ol, menu, summary {
    list-style: none;
    padding-left: 0;
}

// Fix nested ordered list numbering issue in Firefox
ol {
    counter-reset: revert;
}

// ======================================
// Image & Media Adjustments
// ======================================

// Ensure images fit their container
// - Prevents images from overflowing
// - Removes unwanted borders
// - Aligns images properly
img {
    max-inline-size: 100%;
    max-block-size: 100%;
    border-style: none;
    vertical-align: middle;
    display: block;
}

// ======================================
// Table Reset
// ======================================

// Standardize table behavior
// - Prevents unwanted spacing between cells
// - Ensures tables take full width by default
table {
    border-collapse: collapse;
    border-spacing: 0;
    width: 100%;
}

// ======================================
// Form & Button Normalization
// ======================================

// Normalize input, textarea, select, and button styles
// - Removes inconsistent default styles across browsers
// - Ensures they inherit fonts and colors from surrounding text
input, textarea, select, button {
    font: inherit;
    color: inherit;
    background: transparent;
    border: none;
    outline: none;
}

// Ensure inputs and textareas remain selectable in Safari
input, textarea {
    -webkit-user-select: auto;
}

// Prevents Safari from breaking text wrapping in textareas
textarea {
    white-space: revert;
    overflow: auto;
}

// Improve accessibility of disabled elements
// - Adds visual feedback by reducing opacity and changing cursor
:disabled {
    cursor: not-allowed;
    opacity: 0.5;
}

// Remove default button appearance
// - Prevents iOS and Safari from applying native button styles
button, [type="button"], [type="reset"], [type="submit"] {
    -webkit-appearance: button;
    cursor: pointer;
    background-color: transparent;
}

// Remove Firefox-specific padding inside buttons
button::-moz-focus-inner, [type="button"]::-moz-focus-inner, 
[type="reset"]::-moz-focus-inner, [type="submit"]::-moz-focus-inner {
    border-style: none;
    padding: 0;
}

// ======================================
// Accessibility & Focus Styles
// ======================================

// Keep focus outline for keyboard users, but remove it for mouse clicks
// - Helps users navigate without breaking usability
:focus-visible {
    outline: 2px solid currentColor;
    outline-offset: 2px;
}
:focus:not(:focus-visible) {
    outline: none;
}

// ======================================
// Fieldset & Legend Adjustments
// ======================================

// Normalize fieldset and legend styles
// - Prevents inconsistent spacing across browsers
fieldset {
    padding: 0.35em 0.75em 0.625em;
}
legend {
    box-sizing: border-box;
    color: inherit;
    display: table;
    max-width: 100%;
    padding: 0;
    white-space: normal;
}

// ======================================
// Miscellaneous Fixes
// ======================================

// Reset default placeholder opacity for better contrast
::placeholder {
    color: unset;
}

// Ensure [hidden] elements are completely hidden
// - Prevents inconsistent handling across browsers
:where([hidden]) {
    display: none;
}

// Ensure contenteditable elements function correctly
// - Fixes browser inconsistencies when editing text
:where([contenteditable]:not([contenteditable="false"])) {
    -moz-user-modify: read-write;
    -webkit-user-modify: read-write;
    overflow-wrap: break-word;
    -webkit-line-break: after-white-space;
    -webkit-user-select: auto;
}

// Reapply draggable feature in Chromium and Safari
// - Fixes draggable elements losing functionality
:where([draggable="true"]) {
    -webkit-user-drag: element;
}

// Revert Modal native behavior
// - Ensures the <dialog> element behaves as expected
:where(dialog:modal) {
    all: revert;
    box-sizing: border-box;
}

// Remove default styles from <details> summary in WebKit browsers
::-webkit-details-marker {
    display: none;
}

// ======================================
// Additional Element Fixes
// ======================================

// Standardize <hr> element
// - Ensures it appears consistently across browsers
hr {
    border: none;
    height: 1px;
    background-color: currentColor;
    opacity: 0.2;
}
